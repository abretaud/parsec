<?xml version="1.0"?>
<tool id="parsec.folders.set_permissions" name="folders" version="1.0">
 <description>set_permissions</description>
	<macros>
		<import>macros.xml</import>
	</macros>
	<expand macro="requirements"/>
	<command detect_errors="aggressive">
parsec folders set_permissions
"$folder_id"

#if $action:
  --action "$action"
#end if
#for $rep in $repeat_add_ids:
  --add_ids "$rep.add_ids"
#end for
#for $rep in $repeat_manage_ids:
  --manage_ids "$rep.manage_ids"
#end for
#for $rep in $repeat_modify_ids:
  --modify_ids "$rep.modify_ids"
#end for

| jq -S . > $results
</command>
	<inputs>
    <!-- arguments -->
	<param name="folder_id" label="Folder Id" argument="folder_id" type="text" help="the folder's encoded id, prefixed by 'F'" />

    <!-- options -->
	<param name="action" label="Action" argument="action" type="text" help="action to execute, only \"set_permissions\" is supported." />
	<repeat name="repeat_add_ids" title="add_ids">
		<param name="add_ids" label="Add Ids" argument="add_ids" type="text" help="list of role IDs which can add datasets to the folder" />
	</repeat>
	<repeat name="repeat_manage_ids" title="manage_ids">
		<param name="manage_ids" label="Manage Ids" argument="manage_ids" type="text" help="list of role IDs which can manage datasets in the folder" />
	</repeat>
	<repeat name="repeat_modify_ids" title="modify_ids">
		<param name="modify_ids" label="Modify Ids" argument="modify_ids" type="text" help="list of role IDs which can modify datasets in the folder" />
	</repeat>

	</inputs>
	<outputs>
		<data format="json" name="results"/>
	</outputs>
	<help>
Set the permissions of a folder.
	</help>
</tool>
